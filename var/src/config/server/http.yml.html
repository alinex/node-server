<!DOCTYPE html>
<html>
<head>
  <title>http.yml</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../", thisFile = "home/alex/a3/node-server/var/src/config/server/httpyml", defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>
  <script src="../../../../fileSearch.js"></script>
  <script src="../../../../goToLine.js"></script>
  <link rel="stylesheet" href="../../../../fileSearch.css" />
  <link rel="stylesheet" href="../../../../goToLine.css" />
</head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io" onmouseover="lllogo.src='https://alinex.github.io/images/Alinex-200.png'" onmouseout="lllogo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="lllogo" src="https://alinex.github.io/images/Alinex-black-200.png" width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png" style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog" class="btn btn-primary"><span class="glyphicon-cog"></span> Blog</a>
  <a href="http://alinex.github.io/code.html" class="btn btn-warning"><span class="glyphicon-pencil"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#configuration%20for%20http%20server">Configuration for http server</a>
      </div>
      <div class="heading h2">
        <a href="#server%20connections">Server Connections</a>
      </div>
      <div class="heading h3">
        <a href="#host">Host</a>
      </div>
      <div class="heading h3">
        <a href="#port">Port</a>
      </div>
      <div class="heading h3">
        <a href="#tls">TLS</a>
      </div>
      <div class="heading h3">
        <a href="#load">Load</a>
      </div>
      <div class="heading h2">
        <a href="#log%20settings">Log Settings</a>
      </div>
      <div class="heading h3">
        <a href="#trust%20proxy">trust proxy</a>
      </div>
      <div class="heading h3">
        <a href="#server%20nodes">Server nodes</a>
      </div>
      <div class="heading h2">
        <a href="#access%20restrictions">Access restrictions</a>
      </div>
      <div class="heading h3">
        <a href="#whitelist">Whitelist</a>
      </div>
      <div class="heading h3">
        <a href="#blacklist">Blacklist</a>
      </div>
      <div class="heading h2">
        <a href="#session%20handling">Session handling</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-server" title="Fork me on GitHub"></a><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
<div class="pilwrap" id="configuration%20for%20http%20server">
  <h1>
    <a href="#configuration%20for%20http%20server" name="configuration%20for%20http%20server" class="pilcrow">&#182;</a>
    Configuration for http server
  </h1>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="server%20connections">
  <h2>
    <a href="#server%20connections" name="server%20connections" class="pilcrow">&#182;</a>
    Server Connections
  </h2>
</div>


<p>This is list of labels with their connections to bind to. SWith this you
have the ability to listen on multiple connections. You may connect your apps
with specific labels, vhost and context paths.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="host">
  <h3>
    <a href="#host" name="host" class="pilcrow">&#182;</a>
    Host
  </h3>
</div>


<p>Hostname or IP address to bind server to.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="port">
  <h3>
    <a href="#port" name="port" class="pilcrow">&#182;</a>
    Port
  </h3>
</div>


<p>Set the port the server is listening on.</p>

<p>To use a privileged port below 1024 you have to bind it using root privileges.
This may be critical.
The following three methods are possible to do this securely:</p>

<ol>
<li><p>Use sudo to start the server and change back to the normal user
after port binding.</p></li>
<li><p>Use ip-tables to forward to an unprivileged port:
<code>sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 3000</code></p></li>
<li><p>Use Nginx reverse-proxy on port 80 this helps also if you may run other
things on port 80, too.</p></li>
<li><p>Give Normal user capability of using sockets as root
sudo apt-get install libcap2-bin
sudo setcap cap_net_bind_service=+ep <code>readlink -f \</code>which node``</p></li>
</ol>

<p>Keep in mind to use different ports for different services like HTTP and
HTTPS. Defaults to port 23174 if not set.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="tls">
  <h3>
    <a href="#tls" name="tls" class="pilcrow">&#182;</a>
    TLS
  </h3>
</div>


<p>The settings to use an SSL encryption on this connections:</p>

<ul>
<li>pfx - PKCS#12 certificate containing certificate, private key and CA
certificates to use for SSL</li>
<li>cert - public x509 certificate to use</li>
<li>key - private key to use for SSL</li>
<li>passphrase - passphrase for the private key or pfx if necessary</li>
<li>ca - authority certificate or array of authority certificates to check
the remote host against"</li>
<li>ciphers - string describing the ciphers to use or exclude
(<a href='http://www.openssl.org/docs/apps/ciphers.html#CIPHER_LIST_FORMAT'>http://www.openssl.org/docs/apps/ciphers.html#CIPHER_LIST_FORMAT</a>)"</li>
<li>rejectUnauthorized - lag to check server certificate against the list of
supplied CAs</li>
<li>secureProtocol - SSL method to use, e.g. TLSv1_method to force TLS version 1
(the possible values depend on your installation of OpenSSL and
are defined in the constant SSL_METHODS)"</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="load">
  <h3>
    <a href="#load" name="load" class="pilcrow">&#182;</a>
    Load
  </h3>
</div>


<p>The load settings will result in rejection of incoming requests with an
"HTTP Server Timeout (503)" response if they are reached:</p>

<ul>
<li>maxHeap - maximum V8 heap size</li>
<li>maxRss - maximum process RSS size</li>
<li>eventLoopDelay - maximum event loop delay duration in milliseconds</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="l-Scalar-Plain">listen</span><span class="p-Indicator">:</span>

  <span class="l-Scalar-Plain">default</span><span class="p-Indicator">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>host: localhost</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">&lt;&lt;&lt;env://PORT | 23174&gt;&gt;&gt;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="log%20settings">
  <h2>
    <a href="#log%20settings" name="log%20settings" class="pilcrow">&#182;</a>
    Log Settings
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="l-Scalar-Plain">log</span><span class="p-Indicator">:</span>

  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">combined</span>
    <span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">filename</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">access.log</span>
      <span class="l-Scalar-Plain">datePattern</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">.yyyy-MM-dd</span>
      <span class="l-Scalar-Plain">compress</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">error</span>
    <span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">filename</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">error.log</span>
      <span class="l-Scalar-Plain">maxSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">100MB</span>
      <span class="l-Scalar-Plain">compress</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>






</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="trust%20proxy">
  <h3>
    <a href="#trust%20proxy" name="trust%20proxy" class="pilcrow">&#182;</a>
    trust proxy
  </h3>
</div>


<p>Indicate that the app is sitting behind a front-facing proxy, and the X-Forwarded-*
headers may be trusted for determining the connection and the IP address of
the client. It must, however, be noted that, the X-Forwarded-* headers are
easily spoofed and the detected IP addresses are unreliable.
trustProxy: false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="server%20nodes">
  <h3>
    <a href="#server%20nodes" name="server%20nodes" class="pilcrow">&#182;</a>
    Server nodes
  </h3>
</div>


<p>If set this will define how much nodes to start. 0 means no cluster support
running with one process. 1 means cluster support running with one forked node
which will be restarted from the master on kill. And higher values mean more
nodes but not more will be used than the number of cpu cores.
nodes: 0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="access%20restrictions">
  <h2>
    <a href="#access%20restrictions" name="access%20restrictions" class="pilcrow">&#182;</a>
    Access restrictions
  </h2>
</div>


<p>The following restrictions are possible:</p>

<ul>
<li><code>ip</code> give an ip address or list of addresses</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="whitelist">
  <h3>
    <a href="#whitelist" name="whitelist" class="pilcrow">&#182;</a>
    Whitelist
  </h3>
</div>


<p>To only allow access from specific clients they have to be listed here:
allow:
 ip:</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="blacklist">
  <h3>
    <a href="#blacklist" name="blacklist" class="pilcrow">&#182;</a>
    Blacklist
  </h3>
</div>


<p>To disallow access from specific clients list them here:
disallow:
 ip:</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="session%20handling">
  <h2>
    <a href="#session%20handling" name="session%20handling" class="pilcrow">&#182;</a>
    Session handling
  </h2>
</div>


<p>session:
The secret is used to hash the session with HMAC. The session is then
protected against session hijacking by checking the fingerprint against the
hash with the secret.
secret: R4FCaOCutWGN.GfVym9ag3yyPM
After the following time of inactivity (no server request) the session will
be outdated.
expire: 3600s</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
